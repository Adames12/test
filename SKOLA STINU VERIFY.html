<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="utf-8" />
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Škola Stínů — Ověření</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
  --gold: #d4af37;
  --muted: #cfcfcf;
  --danger: #ff5a5a;
  --bg1: #050507;
  --bg2: #000;
}

html,body{
  margin:0;
  padding:0;
  height:100%;
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  font-family:'Cinzel',serif;
  color:#eee;
  overflow:hidden;
}

/* ---- Header ---- */
header{
  padding:22px 10px 8px;
  text-align:center;
  z-index:10;
  position:relative;
}

h1{
  margin:0;
  font-size:2.4rem;
  color:var(--gold);
  text-shadow:0 0 25px rgba(212,175,55,0.7);
}

.subtitle{
  font-size:0.9rem;
  color:var(--muted);
  margin-top:6px;
}

/* ---- Layout ---- */
main{
  position:relative;
  z-index:10;
  width:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:16px;
  padding:0 14px;
  padding-top:10px;
  box-sizing:border-box;
}

/* ---- Panel ---- */
.panel{
  width:100%;
  max-width:380px;
  background:rgba(10,10,10,0.55);
  border-radius:16px;
  padding:18px;
  border:1px solid rgba(212,175,55,0.2);
  box-shadow:0 10px 30px rgba(0,0,0,0.5);
  backdrop-filter:blur(5px);
}

#display{
  height:52px;
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.06);
  border-radius:10px;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:1.5rem;
  margin-bottom:12px;
  letter-spacing:3px;
}

/* ---- Numpad ---- */
.numpad{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
}

.btn{
  padding:14px;
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.08);
  color:white;
  font-size:1.25rem;
  border-radius:10px;
  font-weight:700;
  box-shadow:0 4px 8px rgba(0,0,0,0.5) inset;
  transition:0.1s;
}

.btn:active{
  transform:scale(0.97);
}

.btn--enter{
  grid-column:span 3;
  background:var(--gold);
  color:#111;
  border:none;
  margin-top:4px;
  font-size:1.2rem;
}

.btn--clear{
  background:rgba(255,80,80,0.1);
  color:#ffcdcd;
}

#err{
  height:28px;
  text-align:center;
  margin-top:6px;
  font-weight:700;
  color:var(--danger);
  opacity:0;
  transition:opacity 0.2s;
}

/* ---- Info box ---- */
.info{
  width:100%;
  max-width:420px;
  background:rgba(255,255,255,0.02);
  border:1px solid rgba(255,255,255,0.06);
  border-radius:16px;
  padding:18px 20px;
  box-shadow:0 8px 20px rgba(0,0,0,0.6);
  text-align:left;
}

.info h2{
  margin:0 0 10px 0;
  color:var(--gold);
}

.info p{
  margin-top:0;
  font-size:0.92rem;
  line-height:1.45;
}

.badge{
  width:44px;
  height:44px;
  background:rgba(255,255,255,0.05);
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--gold);
  margin-right:10px;
}

.stat{
  display:flex;
  align-items:center;
  margin-top:10px;
}

.hint{
  margin-top:10px;
  font-size:0.88rem;
  color:var(--muted);
}

/* ---- Canvas behind ---- */
canvas#fxCanvas{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  pointer-events:none;
  z-index:1;
}

/* ---- Runic circle ---- */
.runic-svg{
  position:fixed;
  left:50%;
  top:50%;
  width:420px;
  height:420px;
  transform:translate(-50%,-50%);
  opacity:0.4;
  z-index:2;
  pointer-events:none;
}

footer{
  z-index:10;
  text-align:center;
  margin:20px 0;
  color:#777;
  font-size:0.85rem;
}

/* ---- ultra small fixes ---- */
@media (max-width:420px){
  h1{font-size:1.9rem;}
  .panel{padding:14px;}
  #display{font-size:1.3rem;height:46px;}
}

</style>
</head>

<body>

<header>
  <h1>ŠKOLA STÍNŮ</h1>
  <div class="subtitle">Vstup pouze pro zasvěcence — zadej svůj kód</div>
</header>

<main>
  <!-- panel -->
  <section class="panel" id="panel">
    <div id="display">---------</div>

    <div class="numpad">
      <button class="btn" data-key="1">1</button>
      <button class="btn" data-key="2">2</button>
      <button class="btn" data-key="3">3</button>
      <button class="btn" data-key="4">4</button>
      <button class="btn" data-key="5">5</button>
      <button class="btn" data-key="6">6</button>
      <button class="btn" data-key="7">7</button>
      <button class="btn" data-key="8">8</button>
      <button class="btn" data-key="9">9</button>
      <button class="btn" data-key="0">0</button>
      <button class="btn btn--clear" id="clearBtn">C</button>
      <button class="btn btn--enter" id="enterBtn">POTVRDIT</button>
    </div>

    <div id="err"></div>
  </section>

  <!-- info -->
  <aside class="info">
    <h2>Vítej, zasvěcenče</h2>
    <p>Drak střeží prastarý portál. Zadej kód a cesta se ti otevře.</p>

    <div class="stat">
      <div class="badge">⚜</div>
      <div>
        <div style="font-weight:700;color:#fff">Identifikace</div>
        <div style="font-size:.9rem;color:#cfcfcf">Po úspěchu budeš přesměrován dále.</div>
      </div>
    </div>

    <div class="stat">
      <div class="badge">✦</div>
      <div>
        <div style="font-weight:700;color:#fff">Pravidla</div>
        <div style="font-size:.9rem;color:#cfcfcf">Kód nikomu neprozrazuj.</div>
      </div>
    </div>

    <div class="hint">Tip: můžeš psát také na klávesnici.</div>
  </aside>
</main>

<!-- Runic circle -->
<svg class="runic-svg" viewBox="0 0 680 680">
  <circle cx="340" cy="340" r="260"
          stroke="rgba(212,175,55,0.28)" stroke-width="2" fill="none"/>
</svg>

<canvas id="fxCanvas"></canvas>

<footer>© 2025 – Tajemná hra</footer>

<script>
/* ------------------------------------------------
   VERIFY LOGIC
------------------------------------------------ */
const SECRET_CODE = "259148637";
const MAXLEN = SECRET_CODE.length;

let cur = "";
const display = document.getElementById("display");
const err = document.getElementById("err");
const panel = document.getElementById("panel");

function updateDisplay(){
  display.textContent = (cur || "").padEnd(MAXLEN, "-");
}

function attempt(){
  if(cur === SECRET_CODE){
    err.style.opacity = 0;
    successSequence();
  } else {
    err.textContent = "Nesprávný kód";
    err.style.opacity = 1;
    panel.animate([
      {transform:"translateX(0)"},
      {transform:"translateX(-8px)"},
      {transform:"translateX(8px)"},
      {transform:"translateX(0)"}
    ], {duration:300});
    cur = "";
    updateDisplay();
  }
}

document.querySelectorAll(".btn").forEach(btn=>{
  btn.addEventListener("click",()=>{
    const key = btn.dataset.key;

    if(btn.id === "clearBtn"){
      cur = "";
      updateDisplay();
      return;
    }

    if(btn.id === "enterBtn"){
      attempt();
      return;
    }

    if(key && cur.length < MAXLEN){
      cur += key;
      updateDisplay();
    }
  });
});

window.addEventListener("keydown",e=>{
  if(e.key >= "0" && e.key <= "9" && cur.length < MAXLEN){
    cur += e.key;
    updateDisplay();
  }
  if(e.key === "Backspace"){
    cur = "";
    updateDisplay();
  }
  if(e.key === "Enter"){
    attempt();
  }
});

/* ------------------------------------------------
   SUCCESS → redirect
------------------------------------------------ */
function successSequence(){
  panel.animate([
    {transform:"scale(1)"},
    {transform:"scale(1.04)"},
    {transform:"scale(1)"}
  ], {duration:900});

  setTimeout(()=>{
    window.location.href = "SKOLA STINU REGISTER.html";
  },900);
}

/* ------------------------------------------------
   CANVAS EFFECTS (LIGHT + DRAGON)
   simplified mobile version = much smoother
------------------------------------------------ */
const canvas = document.getElementById("fxCanvas");
const ctx = canvas.getContext("2d");
function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

const dragon = new Image();
dragon.src = "dragon.png";
let ready = false;
dragon.onload = ()=> ready=true;

function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const w = canvas.width;
  const h = canvas.height;
  const cx = w/2;
  const cy = h/2;
  const size = Math.min(w,h)*0.55;

  ctx.save();
  const g = ctx.createRadialGradient(cx,cy,size*0.1,cx,cy,size*1.2);
  g.addColorStop(0,"rgba(255,220,120,0.25)");
  g.addColorStop(1,"rgba(0,0,0,0)");
  ctx.fillStyle = g;
  ctx.fillRect(0,0,w,h);
  ctx.restore();

  if(ready){
    ctx.save();
    ctx.globalAlpha = 0.9;
    ctx.drawImage(dragon, cx-size/2, cy-size/2, size, size);
    ctx.restore();
  }

  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
